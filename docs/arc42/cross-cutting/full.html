<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.18">
<title>Cross-cutting concepts</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Cross-cutting concepts</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_entity_relationship_model">Entity-relationship model</a></li>
<li><a href="#_domain_concepts">Domain concepts</a>
<ul class="sectlevel2">
<li><a href="#_api_model">API model</a></li>
<li><a href="#_domain_models">Domain models</a></li>
</ul>
</li>
<li><a href="#_safety_and_security_concepts">Safety and security concepts</a>
<ul class="sectlevel2">
<li><a href="#_authentication_authorization">Authentication / authorization</a></li>
<li><a href="#_credentials">Credentials</a></li>
</ul>
</li>
<li><a href="#_architecture_and_design_patterns">Architecture and design patterns</a>
<ul class="sectlevel2">
<li><a href="#_module_package_structure">Module / package structure</a></li>
</ul>
</li>
<li><a href="#_under_the_hood_concepts">"Under-the-hood" concepts</a>
<ul class="sectlevel2">
<li><a href="#_exception_and_error_handling">Exception and error handling</a></li>
</ul>
</li>
<li><a href="#_development_concepts">Development concepts</a>
<ul class="sectlevel2">
<li><a href="#_build_test_deploy">Build, test, deploy</a></li>
<li><a href="#_code_generation">Code generation</a></li>
<li><a href="#_migration">Migration</a></li>
<li><a href="#_configurability">Configurability</a></li>
<li><a href="#_java_style_guide">Java style guide</a></li>
<li><a href="#_api_guide">API guide</a></li>
<li><a href="#_docomentation_style_guide">Docomentation style guide</a></li>
<li><a href="#_unit_and_functional_testing">Unit and functional testing</a></li>
<li><a href="#_clean_code">Clean code</a></li>
<li><a href="#_secure_coding_standards">Secure coding standards</a></li>
<li><a href="#_trace_x_technical_class_responsibilities">Trace-X technical class responsibilities</a></li>
</ul>
</li>
<li><a href="#_operational_concepts">Operational concepts</a>
<ul class="sectlevel2">
<li><a href="#_administration">Administration</a></li>
<li><a href="#_scaling">Scaling</a></li>
<li><a href="#_clustering">Clustering</a></li>
<li><a href="#_logging">Logging</a></li>
<li><a href="#_monitoring">Monitoring</a></li>
</ul>
</li>
<li><a href="#_user_experience">User experience</a>
<ul class="sectlevel2">
<li><a href="#_user_interface">User interface</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_entity_relationship_model">Entity-relationship model</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Please be informed that the 'as-planned' version currently lacks the database relations. However, kindly maintain the Entity-relationship model (ERM) in its current state.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="diag-plantuml-md5-02e8c16ca5bc38a04ad201ff718a283f.svg" alt="Diagram" width="2033" height="1160">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_domain_concepts">Domain concepts</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_api_model">API model</h3>
<div class="paragraph">
<p>For detailed information about the API model, please refer to the <a href="https://eclipse-tractusx.github.io/traceability-foss/docs/api-specification/api-specification.html">API specification</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_domain_models">Domain models</h3>
<div class="sect3">
<h4 id="_assets">Assets</h4>
<div class="imageblock">
<div class="content">
<img src="level-1.svg" alt="level 1" width="1623" height="1827">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_quality_notifications">Quality notifications</h4>
<div class="imageblock">
<div class="content">
<img src="level-2.svg" alt="level 2" width="1641" height="680">
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_safety_and_security_concepts">Safety and security concepts</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_authentication_authorization">Authentication / authorization</h3>
<div class="sect3">
<h4 id="_trace_x_api">Trace-X API</h4>
<div class="paragraph">
<p>The Trace-X API is secured using OAuth2.0 / Open ID Connect.
Every request to the Trace-X API requires a valid bearer token.
The JWT token should also contain two claims:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>'bpn' which is equal to the configuration value from <code>API_ALLOWED_BPN</code> property</p>
</li>
<li>
<p>'resource_access' with the specific key for C-X environments.
The list of values will be converted to roles by Trace-X.
Currently, Trace-X API handles three roles: <strong>'User'</strong> and <strong>'Supervisor'</strong> and <strong>'Admin'.</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can have a look at the <a href="https://github.com/eclipse-tractusx/traceability-foss/blob/main/docs/src/docs/administration/system-overview.adoc#rights-and-role-matrix-of-trace-x">rights and role matrix</a> in the system overview of the administration guide.</p>
</div>
</div>
<div class="sect3">
<h4 id="_trace_x_as_edc_client">Trace-X as EDC client</h4>
<div class="paragraph">
<p>The Trace-X accesses the Catena-X network via the EDC consumer connector.
This component requires authentication via a Verifiable Credential (VC), which is provided to the EDC via the managed identity wallet.</p>
</div>
<div class="paragraph">
<p>The VC identifies and authenticates the EDC and is used to acquire access permissions for the data transferred via EDC.</p>
</div>
</div>
<div class="sect3">
<h4 id="_trusted_port_for_internal_apis">Trusted Port for Internal APIs</h4>
<div class="paragraph">
<p>A second port, called the trusted port, has been introduced which can only be accessed by internal services within the Kubernetes cluster. This measure is implemented to handle APIs that are difficult to secure and involve several systems and processes. The trusted port ensures that only internal, trusted components can access these sensitive APIs, enhancing overall security.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Quality notification callback APIs (receive, update) - called by EDC Dataplane</p>
</li>
<li>
<p>Endpoint Data Reference callback API - called by EDC Controlplane</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_credentials">Credentials</h3>
<div class="paragraph">
<p>Credentials must never be stored in Git!</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_architecture_and_design_patterns">Architecture and design patterns</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_module_package_structure">Module / package structure</h3>
<div class="ulist">
<ul>
<li>
<p>Main domain name</p>
<div class="ulist">
<ul>
<li>
<p>Application</p>
<div class="ulist">
<ul>
<li>
<p>Optional: subdomain name (in case of inheritance) → following same structure as main domain</p>
</li>
<li>
<p>Mapper: holds the mapper of transforming domain models to response models</p>
</li>
<li>
<p>Service: holds the interface for implementation in the domain package</p>
</li>
<li>
<p>REST: holds the controller for providing the api for the domain</p>
</li>
</ul>
</div>
</li>
<li>
<p>Domain</p>
<div class="ulist">
<ul>
<li>
<p>Optional: subdomain name (in case of inheritance)</p>
</li>
<li>
<p>Model: holds the domain model</p>
</li>
<li>
<p>Service: implementation of the interface provided in the application package</p>
</li>
<li>
<p>Repository: holds the interface for accessing the infrastructure package</p>
</li>
</ul>
</div>
</li>
<li>
<p>Infrastructure</p>
<div class="ulist">
<ul>
<li>
<p>Optional: subdomain name (in case of inheritance)</p>
</li>
<li>
<p>Model: holds the technical entities</p>
</li>
<li>
<p>Repository: holds the data access layer</p>
<div class="ulist">
<ul>
<li>
<p>E.g. JPARepository / Impl</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>All models (request / response) used in the API should be saved in the tx-model project.
To be reusable for cucumber testing.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_under_the_hood_concepts">"Under-the-hood" concepts</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_exception_and_error_handling">Exception and error handling</h3>
<div class="paragraph">
<p>There are two types of potential errors in Trace-X:</p>
</div>
<div class="sect3">
<h4 id="_technical_errors">Technical errors</h4>
<div class="paragraph">
<p>Technical errors occur when there is a problem with the application itself, its configuration or directly connected infrastructure, e.g. the Postgres database.
Usually, the application cannot solve these problems by itself and requires some external support (manual work or automated recovery mechanisms, e.g. Kubernetes liveness probes).</p>
</div>
<div class="paragraph">
<p>These errors are printed mainly to the application log and are relevant for the health-checks.</p>
</div>
</div>
<div class="sect3">
<h4 id="_functional_errors">Functional errors</h4>
<div class="paragraph">
<p>Functional errors occur when there is a problem with the data that is being processed or external systems are unavailable and data cannot be sent / fetched as required for the process.
While the system might not be able to provide the required function at that moment, it may work with a different dataset or as soon as the external systems recover.</p>
</div>
</div>
<div class="sect3">
<h4 id="_rules_for_exception_handling">Rules for exception handling</h4>
<div class="sect4">
<h5 id="_throw_or_log_dont_do_both">Throw or log, don&#8217;t do both</h5>
<div class="paragraph">
<p>When catching an exception, either log the exception and handle the problem or rethrow it, so it can be handled at a higher level of the code.
By doing both, an exception might be written to the log multiple times, which can be confusing.</p>
</div>
</div>
<div class="sect4">
<h5 id="_write_own_base_exceptions_for_internal_interfaces">Write own base exceptions for (internal) interfaces</h5>
<div class="paragraph">
<p>By defining a common (checked) base exception for an interface, the caller is forced to handle potential errors, but can keep the logic simple.
On the other hand, you still have the possibility to derive various, meaningful exceptions for different error cases, which can then be thrown via the API.</p>
</div>
<div class="paragraph">
<p>Of course, when using only RuntimeExceptions, this is not necessary - but those can be overlooked quite easily, so be careful there.</p>
</div>
</div>
<div class="sect4">
<h5 id="_central_fallback_exception_handler">Central fallback exception handler</h5>
<div class="paragraph">
<p>There will always be some exception that cannot be handled inside the code correctly - or it may just have been unforeseen.
A central fallback exception handler is required so all problems are visible in the log and the API always returns meaningful responses.
In some cases, this is as simple as a HTTP 500.</p>
</div>
</div>
<div class="sect4">
<h5 id="_dont_expose_too_much_exception_details_over_api">Dont expose too much exception details over API</h5>
<div class="paragraph">
<p>It&#8217;s good to inform the user, why their request did not work, but only if they can do something about it (HTTP 4xx).
So in case of application problems, you should not expose details of the problem to the caller.
This way, we avoid opening potential attack vectors.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_development_concepts">Development concepts</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_build_test_deploy">Build, test, deploy</h3>
<div class="paragraph">
<p>Trace-X is built using Maven and utilizes all the standard concepts of it.
Test execution is part of the build process and a minimum test coverage of 80% is enforced.</p>
</div>
<div class="paragraph">
<p>The project setup contains a multi-module Maven build.
Commonly used classes (like the Trace-X data model) should be extracted into a separate submodule and reused across the project.
However, this is not a "one-size-fits-all" solution.
New submodules should be created with care and require a review by the team.</p>
</div>
<div class="paragraph">
<p>The Maven build alone only leads up to the JAR artifact of Trace-X.
To create Docker images, the Docker build feature is used.
This copies all resources into a builder image, builds the software and creates a final Docker image at the end that can then be deployed.</p>
</div>
<div class="paragraph">
<p>Although the Docker image can be deployed in various ways, the standard solution are the provided Helm charts, which describe the required components as well.</p>
</div>
</div>
<div class="sect2">
<h3 id="_code_generation">Code generation</h3>
<div class="paragraph">
<p>There are two methods of code generation in Trace-X:</p>
</div>
<div class="sect3">
<h4 id="_lombok">Lombok</h4>
<div class="paragraph">
<p>The Lombok library is heavily used to generate boilerplate code (like constructors, getters, setters, builders&#8230;&#8203;).
This way, code can be written faster and this boilerplate code is excluded from test coverage, which keeps the test base lean.</p>
</div>
</div>
<div class="sect3">
<h4 id="_swagger_openapi">Swagger / OpenAPI</h4>
<div class="paragraph">
<p>The API uses OpenAPI annotations to describe the endpoints with all necessary information.
The annotations are then used to automatically generate the OpenAPI specification file, which can be viewed in the Swagger UI that is deployed with the application.</p>
</div>
<div class="paragraph">
<p>The generated OpenAPI specification file is automatically compared to a fixed, stored version of it to avoid unwanted changes of the API.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_migration">Migration</h3>
<div class="paragraph">
<p>Data migration is handled by flyway.</p>
</div>
</div>
<div class="sect2">
<h3 id="_configurability">Configurability</h3>
<div class="paragraph">
<p>Trace-X utilizes the configuration mechanism provided by Spring Boot.
Configuration properties can be defined in the file <code>src/main/resources/application.yml</code></p>
</div>
<div class="paragraph">
<p>Other profiles should be avoided.
Instead, the configuration can be overwritten using Spring&#8217;s external configuration mechanism (see <a href="https://docs.spring.io/spring-boot/docs/2.1.9.RELEASE/reference/html/boot-features-external-config.html" class="bare">https://docs.spring.io/spring-boot/docs/2.1.9.RELEASE/reference/html/boot-features-external-config.html</a>).
The operator must have total control over the configuration of Trace-X.</p>
</div>
</div>
<div class="sect2">
<h3 id="_java_style_guide">Java style guide</h3>
<div class="paragraph">
<p>We generally follow the <a href="https://google.github.io/styleguide/javaguide.html">Google Java Style Guide</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_api_guide">API guide</h3>
<div class="paragraph">
<p>We generally follow the <a href="https://swagger.io/specification/">OpenAPI Specification</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_docomentation_style_guide">Docomentation style guide</h3>
<div class="paragraph">
<p>We generally follow the <a href="https://developers.google.com/style">Google developer documentation style guide</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_unit_and_functional_testing">Unit and functional testing</h3>
<div class="sect3">
<h4 id="_general_unit_testing">General unit testing</h4>
<div class="ulist">
<ul>
<li>
<p>Code coverage &gt;= 80%</p>
</li>
<li>
<p>Writing methods which provide a response to be better testable (avoid void if feasible).</p>
</li>
<li>
<p>Naming of unit tests are as follows:</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/eclipse-tractusx/traceability-foss/main/docs/src/images/arc42/cross-cutting/unit_test_naming.svg" alt="unit test naming">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Use given/when/then pattern for unit test structuring.
E.g:</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/eclipse-tractusx/traceability-foss/main/docs/src/images/arc42/cross-cutting/given_when_then_pattern.svg" alt="given when then pattern">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_integration_testing">Integration testing</h4>
<div class="paragraph">
<p>Each public API should have at least two integration tests (positive / negative).
For integration testing, the <code>tx-backend/src/main/resources/application-integration.yml</code> is used.
Additionally, you need to have a local Docker environment running.
For this, we recommend <a href="https://rancherdesktop.io/">Rancher Dektop</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_clean_code">Clean code</h3>
<div class="paragraph">
<p>We follow the rules and behaviour of: <a href="https://clean-code-developer.com/" class="bare">https://clean-code-developer.com/</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_secure_coding_standards">Secure coding standards</h3>
<div class="paragraph">
<p>As there is no other guideline of C-X, we fix any vulnerabilities, exposures, flaw detected by one of our SAST, DAST, Pentesting tools which is higher than "Very Low".</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/eclipse-tractusx/traceability-foss/main/docs/src/images/arc42/cross-cutting/vulnerability_level.svg" alt="vulnerability level">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_trace_x_technical_class_responsibilities">Trace-X technical class responsibilities</h3>
<div class="sect3">
<h4 id="_controller">Controller</h4>
<div class="ulist">
<ul>
<li>
<p>Has only one dependency to a facade or a service or a validator annotation</p>
</li>
<li>
<p>Has no own logic</p>
</li>
<li>
<p>Includes the swagger documentation annotations</p>
</li>
<li>
<p>Has an integration test class</p>
</li>
<li>
<p>Uses a static mapper to transform a domain model into the response model</p>
</li>
<li>
<p>Returns a ResponseEntity&lt;T&gt;</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_response_object">Response object</h4>
<div class="ulist">
<ul>
<li>
<p>Should be a public version of the domain object</p>
</li>
<li>
<p>Is a result of the transformation which will be done in the facade</p>
</li>
<li>
<p>Is not necessary if the domain object can be fully public</p>
</li>
<li>
<p>Is not allowed to be implemented in a repository or a DAO</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_facade">Facade</h4>
<div class="ulist">
<ul>
<li>
<p>Should have multiple service classes injected</p>
</li>
<li>
<p>Can be implemented in a controller</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_serviceimpl">ServiceImpl</h4>
<div class="ulist">
<ul>
<li>
<p>Responsible for retrieving data from storage</p>
</li>
<li>
<p>Performs business logic</p>
</li>
<li>
<p>Can be a http client</p>
</li>
<li>
<p>Returns a jpaEntity → domain object</p>
</li>
<li>
<p>Should only be implemented in a controller through an interface</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_repository">Repository</h4>
<div class="ulist">
<ul>
<li>
<p>Represents an interface to the underlying repository implementation which then uses the spring repository</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_domain_object">Domain object</h4>
<div class="ulist">
<ul>
<li>
<p>Mapped from an entity or from received external data</p>
</li>
<li>
<p>Will be used as a working model until it will finally be transformed to a response object or another domain which will be persisted later on</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_config_object">Config object</h4>
<div class="ulist">
<ul>
<li>
<p>Should have the suffix .config at the end of the class</p>
</li>
<li>
<p>Includes beans which are automatically created by app startup</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_constructing_objects">Constructing objects</h4>
<div class="ulist">
<ul>
<li>
<p>Using builder pattern</p>
<div class="ulist">
<ul>
<li>
<p>Currently, we are using the constructor to create objects in our application.
Main reason is to provide immutable objects.</p>
</li>
<li>
<p>As the handling with big loaded constructors is not easy and error prone, it&#8217;s recommended to use the builder pattern to have a clear understanding about what we are creating at the point of implementation.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Using lombok for annotation processing</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_operational_concepts">Operational concepts</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_administration">Administration</h3>
<div class="sect3">
<h4 id="_configuration">Configuration</h4>
<div class="paragraph">
<p>Trace-X can be configured using two mechanisms:</p>
</div>
<div class="sect4">
<h5 id="_application_yml">application.yml</h5>
<div class="paragraph">
<p>If you build Trace-X yourself, you can modify the application.yml config that is shipped with Trace-X.
This file contains all possible config entries for the application.
Once the Docker image has been built, these values can only be overwritten using the Spring external config mechanism (see <a href="https://docs.spring.io/spring-boot/docs/2.1.9.RELEASE/reference/html/boot-features-external-config.html" class="bare">https://docs.spring.io/spring-boot/docs/2.1.9.RELEASE/reference/html/boot-features-external-config.html</a>), e.g. by mounting a config file in the right path or using environment variables.</p>
</div>
</div>
<div class="sect4">
<h5 id="_helm_chart">Helm chart</h5>
<div class="paragraph">
<p>The most relevant config properties are exposed as environment variables and must be set in the Helm chart for the application to be able to run.
Check the Trace-X Helm chart in Git for all available variables.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_scaling">Scaling</h3>
<div class="paragraph">
<p>If the number of consumers rises, Trace-X can be scaled up by using more resources for the deployment pod.
Those resources can be used to utilize more parallel threads to handle job execution.</p>
</div>
</div>
<div class="sect2">
<h3 id="_clustering">Clustering</h3>
<div class="paragraph">
<p>Trace-X can run in clustered mode, as each running job is only present in one pod at a time.
Note: as soon as a resume feature is implemented, this needs to be addressed here.</p>
</div>
</div>
<div class="sect2">
<h3 id="_logging">Logging</h3>
<div class="paragraph">
<p>Logs are being written directly to stdout and are picked up by the cluster management.</p>
</div>
</div>
<div class="sect2">
<h3 id="_monitoring">Monitoring</h3>
<div class="paragraph">
<p>Currently, there is on monitoring supported in Trace-X.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_user_experience">User experience</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_user_interface">User interface</h3>
<div class="sect3">
<h4 id="_table_design">Table design</h4>
<div class="paragraph">
<p>Trace-X uses the following table design to build consistent and user-friendly tables:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/eclipse-tractusx/traceability-foss/main/docs/src/images/arc42/cross-cutting/user-experience/table-design.svg" alt="table design">
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Component</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Black icons</p>
</li>
<li>
<p>When an action cannot be executed for any reason, the icon turns grey</p>
</li>
<li>
<p>A tooltip is shown when hovering over an executable action to describe it</p>
</li>
<li>
<p>A tooltip is shown when hovering over a disabled action to describe the reason why it can&#8217;t be executed</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="https://raw.githubusercontent.com/eclipse-tractusx/traceability-foss/main/docs/src/images/arc42/cross-cutting/user-experience/table-actions.svg" alt="table actions"></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action menus</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Opens when clicking on a three-dot menu</p>
</li>
<li>
<p>Disappears, when clicking anywhere outside the menu</p>
</li>
<li>
<p>List of action icons with text labels</p>
</li>
<li>
<p>The three-dot menu is sticky when used inside the table for single-item actions</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="https://raw.githubusercontent.com/eclipse-tractusx/traceability-foss/main/docs/src/images/arc42/cross-cutting/user-experience/table-action-menus.svg" alt="table action menus"></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multi-select box</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Clicking on it when no items are selected, selects all items on the current page</p>
</li>
<li>
<p>Clicking on it when some items are selected (but not all), selects all items on the current page</p>
</li>
<li>
<p>Clicking on it when all items are selected, deselects all items on the current page</p>
</li>
<li>
<p>Clicking on the small arrow opens a menu for clearing the page selection or the entire selection</p>
</li>
<li>
<p>The menu disappears, when clicking anywhere outside the menu</p>
</li>
<li>
<p>Part of the column header row &#8594; Sticky on top next to column headers</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="https://raw.githubusercontent.com/eclipse-tractusx/traceability-foss/main/docs/src/images/arc42/cross-cutting/user-experience/table-multi-select-box.svg" alt="table multi select box"></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Selection box</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Clicking on it toggles item selection</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Selection count</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Shows selection count of the current page</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Column header</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Shows the column title</p>
</li>
<li>
<p>Hovering over it shows a tooltip that describes sorting behaviour</p>
</li>
<li>
<p>Clicking on it toggles sorting</p>
</li>
<li>
<p>Sticky on top</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="https://raw.githubusercontent.com/eclipse-tractusx/traceability-foss/main/docs/src/images/arc42/cross-cutting/user-experience/table-sorting-tooltip.svg" alt="table sorting tooltip"></span>
Ascending sorting: <span class="image"><img src="https://raw.githubusercontent.com/eclipse-tractusx/traceability-foss/main/docs/src/images/arc42/cross-cutting/user-experience/table-sorting-ascending.svg" alt="table sorting ascending"></span>
Descending sorting: <span class="image"><img src="https://raw.githubusercontent.com/eclipse-tractusx/traceability-foss/main/docs/src/images/arc42/cross-cutting/user-experience/table-sorting-descending.svg" alt="table sorting descending"></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filter</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Can search for any string</p>
</li>
<li>
<p>Results are shown directly without having to press enter</p>
</li>
<li>
<p>Results are shown as a sorted list (ascending)</p>
</li>
<li>
<p>Selected results are shown on top of unselected ones</p>
</li>
<li>
<p>The checkbox inside the search field selects or deselects every result</p>
</li>
<li>
<p>The cross inside the search field resets the search and the filter</p>
</li>
<li>
<p>When the filter is active, 'All' changes to the filtered value (+ the number of other filters)</p>
</li>
<li>
<p>For date values, the search is replaced with a date picker</p>
</li>
<li>
<p>Sticky on top below column headers</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="https://raw.githubusercontent.com/eclipse-tractusx/traceability-foss/main/docs/src/images/arc42/cross-cutting/user-experience/table-filter.svg" alt="table filter"></span>
Date filter: <span class="image"><img src="https://raw.githubusercontent.com/eclipse-tractusx/traceability-foss/main/docs/src/images/arc42/cross-cutting/user-experience/table-filter-date.svg" alt="table filter date"></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quick filter</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Used to quickly filter for specific values</p>
</li>
<li>
<p>Independent of regular filters</p>
</li>
<li>
<p>Work exclusively - only one filter can be selected at a time</p>
</li>
<li>
<p>Click on the currently active quick filter to deactivate it</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Table column settings</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Opens up as an overlay</p>
</li>
<li>
<p>Clicking on Save, the cross or anywhere outside the overlay will close the overlay (only saving changes when clicking Save)</p>
</li>
<li>
<p>Selecting/deselecting columns makes them visible/invisible in the table</p>
</li>
<li>
<p>The order of the columns can be changed by selecting the column title and using the arrow buttons</p>
</li>
<li>
<p>Using the circle arrow icon resets the column visibility and column order</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="https://raw.githubusercontent.com/eclipse-tractusx/traceability-foss/main/docs/src/images/arc42/cross-cutting/user-experience/table-column-settings.svg" alt="table column settings"></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Full-width toggle</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Used to switch between full-width mode or variable-width mode</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scrollbars</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Only visible/active when data exceeds the visible space</p>
</li>
<li>
<p>Sticky elements stay visible regardless of scroll position</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Page size selector</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Shows the currently selected page size</p>
</li>
<li>
<p>When clicking on it, a dropdown opens that shows available page size options</p>
</li>
<li>
<p>Clicking any option will select that option and close the dropdown</p>
</li>
<li>
<p>Clicking anywhere outside the dropdown closes the dropdown without applying any changes</p>
</li>
<li>
<p>Three options are always available</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="https://raw.githubusercontent.com/eclipse-tractusx/traceability-foss/main/docs/src/images/arc42/cross-cutting/user-experience/table-page-size-selector.svg" alt="table page size selector"></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Page information</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Shows information about the amount of items on the current page and the total amount of items</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Page controls</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Used to switch between pages</p>
</li>
<li>
<p>Controls are: First page, previous page, next page, last page</p>
</li>
<li>
<p>Hovering over the controls shows a tooltip that labels each control</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="https://raw.githubusercontent.com/eclipse-tractusx/traceability-foss/main/docs/src/images/arc42/cross-cutting/user-experience/table-page-controls.svg" alt="table page controls"></span></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>In addition, following tables are used within Trace-X:</p>
</div>
<div class="paragraph">
<p>When the data is not as complex and/or extensive and single-item actions are not needed:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/eclipse-tractusx/traceability-foss/main/docs/src/images/arc42/cross-cutting/user-experience/table-small.svg" alt="table small">
</div>
</div>
<div class="paragraph">
<p>When data must only be shown and no actions are needed:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/eclipse-tractusx/traceability-foss/main/docs/src/images/arc42/cross-cutting/user-experience/table-data-only.svg" alt="table data only">
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2024-07-31 08:23:43 UTC
</div>
</div>
</body>
</html>